import{_ as f}from"./index.b6c0f539.js";import{d as v,V as m,f as I,v as g,F as p,o as i,c as o,a as r,K as u,I as k,J as y,a1 as E,S as A,R as C,P as L}from"./@vue.807b2975.js";const O=v({name:"Jointlevel",props:{data:{type:Object,default:()=>({name:"",list:[],checkId:[],checkLevel:null,checkLevelOpen:!1,key:"name",value:"id",child:"children",column:!0,column2:!0,single:!1,noAll:!1})}},setup(e,{emit:h}){const a=m({data:{name:"",list:[],checkId:[],checkLevel:null,checkLevelOpen:!1,key:"name",value:"id",child:"children",column:!0,column2:!0,single:!1,noAll:!1},num:null,allArray:[],getAll(l){l.forEach(n=>{a.allArray.push(n[a.data.value]),n[a.data.child]&&a.getAll(n[a.data.child])})},all(l){a.getAll(a.data.list),a.data.checkId=[...new Set([...a.data.checkId])],a.getNum(),l?a.data.checkId=[...new Set([...a.allArray])]:a.data.checkId.length===a.num?a.data.checkId=[]:a.data.checkId=[...new Set([...a.allArray])],h("checkId",{name:a.data.name,checkId:a.data.checkId})},getNum(){let l=e.data.list.length;e.data.list.forEach(n=>{n[a.data.child]&&(l+=n[a.data.child].length,n[a.data.child].forEach(t=>{t[a.data.child]&&(l+=t[a.data.child].length,t[a.data.child].forEach(d=>{d[a.data.child]&&(l+=d[a.data.child].length)}))}))}),a.num=l},checkChildAll(l,n){l.forEach(t=>{t[a.data.value]===n[a.data.value]&&(a.data.checkId.push(n[a.data.value]),t[a.data.child]&&t[a.data.child].length&&t[a.data.child].forEach(d=>{a.data.checkId.push(d[a.data.value]),d[a.data.child]&&d[a.data.child].length&&d[a.data.child].forEach(c=>{a.data.checkId.push(c[a.data.value]),c[a.data.child]&&c[a.data.child].length&&c[a.data.child].forEach(s=>{a.data.checkId.push(s[a.data.value])})})}))}),a.getAll(a.data.list),a.data.checkId=[...new Set([...a.data.checkId])]},removeChildAll(l,n){l.forEach(t=>{if(t[a.data.value]===n[a.data.value]){let d=a.data.checkId.indexOf(t[a.data.value]);d!==-1&&a.data.checkId.splice(d,1),t[a.data.child]&&t[a.data.child].length&&t[a.data.child].forEach(c=>{let s=a.data.checkId.indexOf(c[a.data.value]);s!==-1&&a.data.checkId.splice(s,1),this.removeChildAll(t[a.data.child],c)})}t[a.data.child]&&t[a.data.child].length&&t[a.data.child].forEach(d=>{if(d[a.data.value]===n[a.data.value]){let c=a.data.checkId.indexOf(d[a.data.value]);c!==-1&&a.data.checkId.splice(c,1),this.removeChildAll(t[a.data.child],d)}else this.removeChildAll(t[a.data.child],n)})})},one(l){if(a.data.checkLevelOpen&&l.level&&l.level!==a.data.checkLevel)return!1;a.getNum(),a.data.single?a.data.checkId=[l[a.data.value]]:(a.data.checkId.includes(l[a.data.value])?this.removeChildAll(a.data.list,l):this.checkChildAll(a.data.list,l),a.getEE(a.data.list)),a.data.checkId=[...new Set([...a.data.checkId])],h("checkId",{name:a.data.name,checkId:a.data.checkId})},childOne(l){a.getNum(),a.data.single?a.data.checkId=l.checkId:(a.getAll(a.data.list),a.getEE(a.data.list)),a.data.checkId=[...new Set([...a.data.checkId])],h("checkId",{name:a.data.name,checkId:a.data.checkId})},getEE(l,n){l.forEach(t=>{t[a.data.child]&&t[a.data.child].forEach(d=>{a.data.checkId.includes(d[a.data.value])&&(a.data.checkId.includes(t[a.data.value])||a.data.checkId.push(t[a.data.value]),n&&a.data.checkId.push(n[a.data.value]),d[a.data.child]&&a.getEE(d[a.data.child],d))})})}});return I(e,()=>{a.data=e.data,a.getNum(),console.log(a.data.checkId.length,a.num)}),g(()=>{a.data=e.data,a.getNum()}),{state:a}}}),N={class:"Jointlevel flex-c"},S={key:0},J=["onClick"];function $(e,h,a,l,n,t){const d=p("Jointlevel",!0);return i(),o("div",N,[!e.state.data.single&&!e.state.data.noAll?(i(),o("div",S,[r("i",{class:u([e.state.data.checkId.length===e.state.num?"icon-circleyuanquan":"icon-circle2yuanquan","iconfont cursor"]),onClick:h[0]||(h[0]=c=>e.state.all())},"\u5168\u9009",2)])):k("",!0),r("div",{class:u(e.state.data.column?"flex column":"flex wrap child")},[(i(!0),o(y,null,E(e.state.data.list,c=>(i(),o("div",{class:u([c[e.state.data.child]&&c[e.state.data.child].length?"line":"","li"])},[r("i",{class:u([e.state.data.checkId.includes(c[e.state.data.value])?"icon-circleyuanquan":"icon-circle2yuanquan","iconfont cursor omit child-line"]),style:A(e.state.data.checkLevelOpen&&c.level&&c.level!==e.state.data.checkLevel?"color:#ccc;text-decoration: line-through;":""),onClick:s=>e.state.one(c)},C(c[e.state.data.key]),15,J),c[e.state.data.child]?(i(),o("p",{key:0,class:u([e.state.data.column2?"flex column ":"flex wrap","childP"]),style:{"padding-left":"20px"}},[L(d,{data:{name:e.state.data.name,list:c[e.state.data.child],checkId:e.state.data.checkId,checkLevel:e.state.data.checkLevel,checkLevelOpen:e.state.data.checkLevelOpen,key:e.state.data.key,value:e.state.data.value,child:e.state.data.child,column:e.state.data.column2,column2:e.state.data.column2,single:e.state.data.single,noAll:e.state.data.noAll||!0},onCheckId:e.state.childOne},null,8,["data","onCheckId"])],2)):k("",!0)],2))),256))],2)])}var V=f(O,[["render",$],["__scopeId","data-v-14262251"]]);export{V as _};
