import{g,p as B,a as x,d as H}from"./request.4aa88092.js";import{_ as S}from"./index.be6222e2.js";import{a as m}from"./element-plus.2cc2e93a.js";import{d as V,X as b,f as j,i as z,c as E,a as s,u as t,R as r,P as a,H as c,o as N,T as M,as as T,at as U}from"./@vue.51d06c04.js";import"./axios.1257cc19.js";import"./qs.43721135.js";import"./side-channel.ba47274a.js";import"./get-intrinsic.1675b33e.js";import"./has-symbols.caae0f97.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.0b5a4f26.js";import"./object-inspect.edb9dbe4.js";import"./jmuxer.f6538b25.js";import"./pinia.ea582305.js";import"./vue-demi.b3a9cad9.js";/* empty css                    */import"./jquery.310f556f.js";import"./vue-router.b643039d.js";import"./lodash.d0608cb7.js";import"./@wangeditor.e02a5395.js";import"./echarts.0483b3d8.js";import"./tslib.60310f1a.js";import"./zrender.c529f8bd.js";import"./@element-plus.38dbca56.js";import"./vite-plugin-mock.c101b59b.js";import"./mockjs.c44c5d1b.js";import"./path-to-regexp.3eda823b.js";import"./dayjs.694c8893.js";import"./lodash-es.242a7524.js";import"./@vueuse.5bca85f6.js";import"./async-validator.fb49d0f5.js";import"./@popperjs.da6c49cb.js";import"./@ctrl.82a509e0.js";const f=u=>(T("data-v-7f58beab"),u=u(),U(),u),A={class:"contentBox"},F={class:"role flex wrap just-b"},O={class:"col-4 card"},J={class:"h60 flex nowrap just-b align-c"},D={class:"h100-60"},q=f(()=>s("div",{class:"flex just-c align-c",style:{flex:"0 0 100px"}},"\u7F16\u8F91",-1)),R={class:"flex",style:{flex:"0 0 100px"}},X={class:"cursor but text-color flex just-c",style:{width:"50%"}},G=["onClick"],K={class:"cursor but text-color flex just-c",style:{width:"50%"}},Q=f(()=>s("i",{class:"iconfont iconfontHover icon-shanchu_o",title:"\u5220\u9664"},null,-1)),W={class:"col-8 card"},Y={class:"h60 flex nowrap just-b align-c"},Z={class:"h100-60"},ee=f(()=>s("div",{class:"flex just-c align-c",style:{flex:"0 0 100px"}},"\u7F16\u8F91",-1)),te={class:"flex",style:{flex:"0 0 100px"}},se={class:"cursor but text-color flex just-c",style:{width:"50%"}},oe=["onClick"],ie={class:"cursor but text-color flex just-c",style:{width:"50%"}},ne=f(()=>s("i",{class:"iconfont iconfontHover icon-shanchu_o",title:"\u5220\u9664"},null,-1)),le={class:"select condition"},ae=f(()=>s("label",{for:"name"},"\u89D2\u8272\u6743\u9650",-1)),re={class:"select condition"},de=f(()=>s("label",{for:"name"},"\u7528\u6237\u7EC4\u540D",-1)),ce=f(()=>s("label",{for:"name"},"\u7EC4\u7EC7\u63CF\u8FF0",-1)),fe=f(()=>s("div",{class:"flex just-c align-c",style:{flex:"0 0 100px"}},"\u7F16\u8F91",-1)),me={class:"flex",style:{flex:"0 0 100px"}},ue={class:"cursor but text-color flex just-c",style:{width:"100%"}},pe=f(()=>s("i",{class:"iconfont iconfontHover icon-shanchu_o",title:"\u5220\u9664"},null,-1)),he=V({name:"/roleManage"}),ge=Object.assign(he,{setup(u){const _=b({show:!1,point:"0,0",backPoint(o){console.log(o,"\u70B9")}}),p=j(null),n=b({list:{name:"roleList",header:[{name:"\u89D2\u8272\u6743\u9650",width:"20%",key:"name",color:"#9495a9"},{name:"\u89D2\u8272\u7F16\u7801",width:"20%",key:"code",color:"#9495a9"}],rows:[],page:1,size:20,total:1,currentPage:1,active:0,select:{open:!1,selectAll:!1,id:"",selectId:[]}},menus:{name:"menus",list:[],checkId:[],key:"menu",value:"functionId",child:"child",column:!1,single:!1},async getList(o){o==="search"&&(this.list.page=1);let e=await g("/system/roleManage",{page:this.list.page,size:this.list.size});e.status&&(this.list.rows=e.data.data,this.list.total=e.data.total)},handleCurrentChange(o){n.list.select.selectId=[],n.list.select.selectAll=!1,n.list.page=o.page,n.getList(null)},form:{id:"",name:"",code:"",remark:"",menuIds:"",status:"0"},rules:{name:[{required:!0,validator:(o,e,d)=>{e===""?d(new Error("\u8BF7\u8F93\u5165\u8D26\u6237\u540D\uFF01")):d()},trigger:"blur"}]},isDisable:!1,info:{show:!1,name:"roleInfo",w:"50%",type:"add"},async getInfo(o){if(o){this.form=JSON.parse(JSON.stringify(o)),this.info.type="edit",this.info.show=!0;return}else this.form={},this.menus.checkId=[],this.info.type="add",this.info.show=!0},submit(){p.value.validate(async o=>{if(o)this.info.type==="add"?(await B("/system/roleManage",{name:this.form.name,functions:this.menus.checkId.toString()})).status&&(this.info.show=!1,this.info.type="add",this.getList(),m({duration:1e3,type:"success",message:"\u65B0\u589E\u6210\u529F"})):this.info.type==="edit"&&(await x("/system/roleManage",{name:this.form.name,functions:this.menus.checkId.toString(),id:this.form.id})).status&&(this.info.show=!1,this.info.type="add",this.getList(),m({duration:1e3,type:"success",message:"\u4FEE\u6539\u6210\u529F"}));else return!1})},hide(){p.value.resetFields(),this.info.show=!1},async del(o){(await H("/system/roleManage",{roleId:o.id})).status&&(this.getList(),m({duration:1e3,type:"success",message:"\u5220\u9664\u6210\u529F"}))}}),I=j(null),i=b({list:{name:"roleList",header:[{name:"\u89D2\u8272\u6743\u9650",width:"20%",key:"name",color:"#9495a9"},{name:"\u89D2\u8272\u7F16\u7801",width:"20%",key:"code",color:"#9495a9"}],rows:[],page:1,size:1e7,total:1,currentPage:1,active:0,select:{open:!1,selectAll:!1,id:"",selectId:[]}},async getList(o){o==="search"&&(this.list.page=1);let e=await g("/system/userManage",{page:this.list.page,size:this.list.size});e.status&&(this.list.rows=e.data.data,this.list.total=e.data.total)},handleCurrentChange(o){i.list.select.selectId=[],i.list.select.selectAll=!1,i.list.page=o.page,i.getList(null)},form:{id:"",name:"",code:"",introduction:"",menuIds:"",status:"0",groupUsers:[]},rules:{name:[{required:!0,validator:(o,e,d)=>{e===""?d(new Error("\u8BF7\u8F93\u5165\u8D26\u6237\u540D\uFF01")):d()},trigger:"blur"}]},isDisable:!1,info:{show:!1,name:"roleInfo",w:"40%",type:"add"},async getInfo(o){if(o){let e=await g("/system/userManage/group");e.status&&(this.form=JSON.parse(JSON.stringify(o)),this.form.groupUsers=e.data.data,this.info.type="edit",this.info.show=!0)}else{let e=await g("/manage/rrole/notBindList");e.status&&(this.userList=e.user),this.form={},this.info.type="add",this.info.show=!0}},submit(){I.value.validate(async o=>{if(o){if(this.info.type==="add")(await B("/system/userManage",{name:this.form.name,userid:this.form.user.toString(),description:this.form.description})).status&&(this.info.show=!1,this.info.type="add",this.getList());else if(this.info.type==="edit"){let e=await x("/system/userManage",this.form.userForm,!0);if(e.code===200)if(this.form.userForm.password){let d=await x("/users/user/resetPwd",this.form.userForm,!0);d.code===200&&(this.info.show=!1,this.info.type="add",this.getList(),m({duration:1e3,type:"success",message:d.msg}))}else this.info.show=!1,this.info.type="add",this.getList(),m({duration:1e3,type:"success",message:e.msg})}}else return!1})},hide(){p.value.resetFields(),this.info.show=!1},async del(o){let e=await H("/system/userManage",{ids:o.groupid});e.status&&(this.getList(),m({duration:1e3,type:"success",message:e.message}))}});return z(()=>{n.getList(null),i.getList(null)}),(o,e)=>{const d=c("Btn"),y=c("el-popconfirm"),v=c("Table"),w=c("el-input"),C=c("el-form-item"),$=c("BasicEditor"),k=c("el-form"),L=c("popup"),P=c("Point");return N(),E("div",A,[s("div",F,[s("div",O,[s("p",J,[s("span",{class:"select",onClick:e[0]||(e[0]=l=>t(n).getList())},"\u89D2\u8272"),r(d,{info:{id:3,name:t(n).list.active===0?"\u65B0\u589E\u89D2\u8272":"\u65B0\u589E\u7528\u6237\u7EC4",type:"add",class:"Btn",icon:"icon-RectangleCopy52",title:t(n).list.active===0?"\u65B0\u589E\u89D2\u8272":"\u65B0\u589E\u7528\u6237\u7EC4"},onHandleClick:e[1]||(e[1]=l=>t(n).getInfo(null))},null,8,["info"])]),s("div",D,[r(v,{list:t(n).list,onHandleCurrentChange:t(n).handleCurrentChange},{rightTitle:a(({})=>[q]),rightBtn:a(({item:l})=>[s("div",R,[s("div",X,[s("i",{class:"iconfont iconfontHover icon-bianji1",title:"\u7F16\u8F91",onClick:h=>t(n).getInfo(l)},null,8,G)]),s("div",K,[r(y,{title:"\u60A8\u662F\u5426\u786E\u5B9A\u5220\u9664\u5F53\u524D\u89D2\u8272?",onConfirm:h=>t(n).del(l)},{reference:a(()=>[Q]),_:2},1032,["onConfirm"])])])]),_:1},8,["list","onHandleCurrentChange"])])]),s("div",W,[s("p",Y,[s("span",{class:"select",onClick:e[2]||(e[2]=l=>t(i).getList())},"\u7528\u6237")]),s("div",Z,[r(v,{list:t(i).list,onHandleCurrentChange:t(i).handleCurrentChange},{rightTitle:a(({})=>[ee]),rightBtn:a(({item:l})=>[s("div",te,[s("div",se,[s("i",{class:"iconfont iconfontHover icon-bianji1",title:"\u7F16\u8F91",onClick:h=>t(i).getInfo(l)},null,8,oe)]),s("div",ie,[r(y,{title:"\u60A8\u662F\u5426\u786E\u5B9A\u5220\u9664\u5F53\u524D\u89D2\u8272?",onConfirm:h=>t(i).del(l)},{reference:a(()=>[ne]),_:2},1032,["onConfirm"])])])]),_:1},8,["list","onHandleCurrentChange"])])])]),r(L,{info:t(n).info,onHide:e[5]||(e[5]=l=>t(n).hide())},{title:a(()=>[s("span",le,M(t(n).info.type==="add"?"\u65B0\u589E\u89D2\u8272":"\u4FEE\u6539\u89D2\u8272"),1)]),main:a(()=>[r(k,{ref_key:"formIns",ref:p,model:t(n).form,rules:t(n).rules,class:"formIns"},{default:a(()=>[r(C,{class:"label",prop:"name"},{default:a(()=>[ae,r(w,{id:"name",modelValue:t(n).form.role,"onUpdate:modelValue":e[3]||(e[3]=l=>t(n).form.role=l),type:"input"},null,8,["modelValue"])]),_:1}),r($,{text:t(n).form.role},null,8,["text"])]),_:1},8,["model","rules"])]),page:a(()=>[s("span",{class:"confirm_btn cursor",onClick:e[4]||(e[4]=l=>t(n).submit())},"\u786E\u5B9A")]),_:1},8,["info"]),r(L,{info:t(i).info,onHide:e[9]||(e[9]=l=>t(i).hide())},{title:a(()=>[s("span",re,M(t(i).info.type==="add"?"\u65B0\u589E\u7528\u6237":"\u4FEE\u6539\u7528\u6237"),1)]),main:a(()=>[r(k,{ref_key:"formIns2",ref:I,model:t(i).form,rules:t(i).rules,class:"formIns flex column",style:{height:"100%"}},{default:a(()=>[r(C,{class:"label",prop:"name"},{default:a(()=>[de,r(w,{id:"name",modelValue:t(i).form.name,"onUpdate:modelValue":e[6]||(e[6]=l=>t(i).form.name=l),type:"input"},null,8,["modelValue"])]),_:1}),r(C,{class:"label",prop:"introduction"},{default:a(()=>[ce,r(w,{id:"name",modelValue:t(i).form.introduction,"onUpdate:modelValue":e[7]||(e[7]=l=>t(i).form.introduction=l),type:"input"},null,8,["modelValue"])]),_:1}),r(v,{list:{name:"roleList",header:[{name:"\u89D2\u8272\u6743\u9650",width:"20%",key:"name"},{name:"\u89D2\u8272\u7F16\u7801",width:"20%",key:"introduction"}],rows:t(i).form.groupUsers||[],page:1,size:1e7,total:1,currentPage:1,active:0,select:{open:!1,selectAll:!1,id:"",selectId:[]}},onHandleCurrentChange:t(i).handleCurrentChange},{rightTitle:a(({})=>[fe]),rightBtn:a(({item:l})=>[s("div",me,[s("div",ue,[r(y,{title:"\u60A8\u662F\u5426\u786E\u5B9A\u5220\u9664\u5F53\u524D\u89D2\u8272?",onConfirm:h=>t(i).del(l)},{reference:a(()=>[pe]),_:2},1032,["onConfirm"])])])]),_:1},8,["list","onHandleCurrentChange"])]),_:1},8,["model","rules"])]),page:a(()=>[s("span",{class:"confirm_btn cursor",onClick:e[8]||(e[8]=l=>t(i).submit())},"\u786E\u5B9A")]),_:1},8,["info"]),r(P,{data:{show:t(_).show,point:t(_).point},onBackPoint:t(_).backPoint},null,8,["data","onBackPoint"])])}}});var We=S(ge,[["__scopeId","data-v-7f58beab"]]);export{We as default};
