import{b as k}from"./axios.1257cc19.js";import{l as c}from"./qs.43721135.js";import{c as T}from"./index.0fad94e8.js";import{d as w}from"./pinia.ea582305.js";import{a as r,E as y}from"./element-plus.2cc2e93a.js";import{a7 as D,f as v}from"./@vue.51d06c04.js";const b=w("dict",{state:()=>({dict:[]}),actions:{getDict(e){if(e==null&&e=="")return null;try{for(let a=0;a<this.dict.length;a++)if(this.dict[a].key==e)return this.dict[a].value}catch{return null}},setDict(e,a){e!==null&&e!==""&&this.dict.push({key:e,value:a})},removeDict(e){var a=!1;try{for(let t=0;t<this.dict.length;t++)if(this.dict[t].key==e)return this.dict.splice(t,1),!0}catch{a=!1}return a},cleanDict(){this.dict=[]},initDict(){}}});console.log(!1,"false");const d=T();let S="/",h=new Date().getTime(),p=new Date().getTime(),g=null,u=0;const m=k.create({baseURL:S,timeout:15e3});m.interceptors.request.use(e=>{e.method==="get"&&(e.data=!0);let a=JSON.parse(window.sessionStorage.getItem("SYSTEM_TOKEN"))||"";if(a)if(e.headers.Authorization=a,e.method==="get"){let t=e.params;e.params={...t,token:a}}else e.data=c.stringify({...c.parse(e.data),token:a});return e},e=>Promise.reject(e));m.interceptors.response.use(e=>{switch(h=new Date().getTime(),h-p>2e3||h-p===0?(p=new Date().getTime(),g=setTimeout(()=>{d.setLoading(!1)},1e3)):(g&&clearTimeout(g),g=setTimeout(()=>{d.setLoading(!1)},1e3)),e.data.code){case 400:e.data.message="\u8BF7\u6C42\u9519\u8BEF(400)",r({duration:1e3,type:"error",message:e.data.msg});break;case 401:u++,u===1&&y.confirm("\u60A8\u7684\u767B\u5F55\u9A8C\u8BC1\u5DF2\u5931\u6548,\u4E3A\u4FDD\u8BC1\u5B89\u5168,\u8BF7\u91CD\u65B0\u767B\u5F55!","\u767B\u5F55\u9A8C\u8BC1\u5DF2\u5931\u6548\u672A\u6388\u6743(401)",{confirmButtonText:"\u9000\u51FA",cancelButtonText:"\u53D6\u6D88",type:"success"}).then(()=>{location.href="/login"}).catch(()=>{location.href="/login"});break;case 403:e.data.message="\u62D2\u7EDD\u8BBF\u95EE(403)",r({duration:1e3,type:"error",message:e.data.msg});break;case 404:e.data.message="\u8BF7\u6C42\u51FA\u9519(404)",r({duration:1e3,type:"error",message:e.data.msg});break;case 408:e.data.message="\u8BF7\u6C42\u8D85\u65F6(408)",r({duration:1e3,type:"error",message:e.data.msg});break;case 500:e.data.message="\u670D\u52A1\u5668\u9519\u8BEF(500)",r({duration:1e3,type:"error",message:e.data.msg});break;case 501:e.data.message="\u670D\u52A1\u672A\u5B9E\u73B0(501)",r({duration:1e3,type:"error",message:e.data.msg});break;case 502:e.data.message="\u7F51\u7EDC\u9519\u8BEF(502)",r({duration:1e3,type:"error",message:e.data.msg});break;case 503:e.data.message="\u670D\u52A1\u4E0D\u53EF\u7528(503)",r({duration:1e3,type:"error",message:e.data.msg});break;case 504:e.data.message="\u7F51\u7EDC\u8D85\u65F6(504)",r({duration:1e3,type:"error",message:e.data.msg});break;case 505:e.data.message="HTTP\u7248\u672C\u4E0D\u53D7\u652F\u6301(505)",r({duration:1e3,type:"error",message:e.data.msg});break}return e},e=>{switch(e.code){case 400:response.data.message="\u8BF7\u6C42\u9519\u8BEF(400)",r({duration:1e3,type:"error",message:response.data.msg});break;case 401:u++,u===1&&y.confirm("\u60A8\u7684\u767B\u5F55\u9A8C\u8BC1\u5DF2\u5931\u6548,\u4E3A\u4FDD\u8BC1\u5B89\u5168,\u8BF7\u91CD\u65B0\u767B\u5F55!","\u767B\u5F55\u9A8C\u8BC1\u5DF2\u5931\u6548\u672A\u6388\u6743(401)",{confirmButtonText:"\u9000\u51FA",cancelButtonText:"\u53D6\u6D88",type:"success"}).then(()=>{location.href="/login"}).catch(()=>{location.href="/login"});break;case 403:response.data.message="\u62D2\u7EDD\u8BBF\u95EE(403)",r({duration:1e3,type:"error",message:response.data.msg});break;case 404:response.data.message="\u8BF7\u6C42\u51FA\u9519(404)",r({duration:1e3,type:"error",message:response.data.msg});break;case 408:response.data.message="\u8BF7\u6C42\u8D85\u65F6(408)",r({duration:1e3,type:"error",message:response.data.msg});break;case 500:response.data.message="\u670D\u52A1\u5668\u9519\u8BEF(500)",r({duration:1e3,type:"error",message:response.data.msg});break;case 501:response.data.message="\u670D\u52A1\u672A\u5B9E\u73B0(501)",r({duration:1e3,type:"error",message:response.data.msg});break;case 502:response.data.message="\u7F51\u7EDC\u9519\u8BEF(502)",r({duration:1e3,type:"error",message:response.data.msg});break;case 503:response.data.message="\u670D\u52A1\u4E0D\u53EF\u7528(503)",r({duration:1e3,type:"error",message:response.data.msg});break;case 504:response.data.message="\u7F51\u7EDC\u8D85\u65F6(504)",r({duration:1e3,type:"error",message:response.data.msg});break;case 505:response.data.message="HTTP\u7248\u672C\u4E0D\u53D7\u652F\u6301(505)",r({duration:1e3,type:"error",message:response.data.msg});break}return d.setLoading(!1),Promise.reject(e)});const l={"Content-Type":"application/json"},f={"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},B=(e,a={},t=!1,n=!0)=>new Promise((o,i)=>{n&&d.setLoading(!0),m.post(e,t?JSON.stringify(a):c.stringify(a),{headers:t?l:f}).then(s=>{o(s.data)}).catch(s=>{i(s.data)})}),J=(e,a={},t=!1,n=!0)=>new Promise((o,i)=>{n&&d.setLoading(!0),m.get(e,t?JSON.stringify(a):{params:a},{headers:t?l:f}).then(s=>{o(s.data)}).catch(s=>{i(s.data)})}),C=(e,a={},t=!1,n=!0)=>new Promise((o,i)=>{n&&d.setLoading(!0),m.put(e,t?JSON.stringify(a):c.stringify(a),{headers:t?l:f}).then(s=>{o(s.data)}).catch(s=>{i(s.data)})}),M=(e,a={},t=!1,n=!0)=>new Promise((o,i)=>{n&&d.setLoading(!0),m.delete(e,t?{params:a}:c.stringify(a),{headers:t?l:f}).then(s=>{o(s.data)}).catch(s=>{i(s.data)})}),F=(...e)=>{const a=v({});return(()=>(e.forEach(async(t,n)=>{a.value[t]=[];const o=b().getDict(t);o?a.value[t]=o:m.get(t).then(i=>{console.log(i,"resp"),a.value[t]=i.data.data.data.map(s=>({label:s.label,value:s.value,elTagType:s.elTagType,elTagClass:s.elTagClass})),b().setDict(t,a.value[t])})}),D(a.value)))()};export{C as a,M as d,J as g,B as p,F as u};
